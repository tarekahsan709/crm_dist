{"version":3,"sources":["validation/sale.js"],"names":["isSaleCreateDataValid","isSaleUpdateDataValid","Joi","require","saleSchema","object","keys","description","string","alphanum","min","max","required","EmployeeId","number","integer","customerId","optional","isNewCustomer","boolean","Vehicle","vehicle_master_engine_no","vehicle_master_chassis_no","number_of_servicing","vehicle_color","VehicleModelId","Customer","customer_name","AreaId","customer_phone","customer_address","free_service_number","SalesDetails","price","discount","internal_reference","payment_method","down_payment","due_payment","sales_date","date","credit_start_date","credit_end_date","EmiDetails","SaleId","payable_money","interest_rate","date_of_the_payment","saleUpdateSchema","id","_id","req","res","next","result","validate","body","error","status","json"],"mappings":"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","file":"sale.js","sourcesContent":["const Joi = require('joi');\n\nconst saleSchema = Joi.object().keys({\n\n    description: Joi.string().alphanum().min(3).max(30).required(),\n    EmployeeId: Joi.number().integer().required(),\n    customerId: Joi.number().integer().optional(),\n    isNewCustomer: Joi.boolean().required(),\n\n    Vehicle: Joi.object().keys({\n        vehicle_master_engine_no: Joi.string().min(3).max(30).required(),\n        vehicle_master_chassis_no: Joi.string().min(3).max(30).required(),\n        number_of_servicing: Joi.number().integer(),\n        vehicle_color: Joi.string().required(),\n        VehicleModelId: Joi.number().integer().required()\n    }),\n    Customer: Joi.object().keys({\n        customer_name: Joi.string().min(3).max(30).required(),\n        AreaId: Joi.number().integer().required(),\n        customer_phone: Joi.number().min(10).required(),\n        customer_address: Joi.string().min(3).max(30),\n        free_service_number: Joi.number().integer()\n    }),\n    SalesDetails: Joi.object().keys({\n        price: Joi.number().integer().required(),\n        free_service_number: Joi.number().integer(),\n        discount: Joi.number().integer().required(),\n        internal_reference: Joi.string().min(3).max(30),\n        payment_method: Joi.string().min(3).max(30).required(),\n        down_payment: Joi.number(),\n        due_payment: Joi.number(),\n        sales_date: Joi.date().required(),\n        credit_start_date: Joi.date(),\n        credit_end_date: Joi.date()\n    }) ,\n    EmiDetails: Joi.object().keys({\n        SaleId: Joi.number().integer().required(),\n        payable_money: Joi.number().integer(),\n        interest_rate: Joi.number().integer().required(),\n        date_of_the_payment: Joi.date().required()\n    })\n\n});\nconst saleUpdateSchema = Joi.object().keys({\n    id: Joi.number().integer().required(),\n    description: Joi.string().alphanum().min(3).max(30).required(),\n    EmployeeId: Joi.number().integer().required(),\n\n    Vehicle: Joi.object().keys({\n        _id: Joi.number().integer().required(),\n        vehicle_master_engine_no: Joi.string().min(3).max(30).required(),\n        vehicle_master_chassis_no: Joi.string().min(3).max(30).required(),\n        number_of_servicing: Joi.number().integer(),\n        vehicle_color: Joi.string().required(),\n        VehicleModelId: Joi.number().integer().required()\n    }),\n    Customer: Joi.object().keys({\n        _id: Joi.number().integer().required(),\n        customer_name: Joi.string().min(3).max(30).required(),\n        AreaId: Joi.number().integer().required(),\n        customer_phone: Joi.number().min(10).required(),\n        customer_address: Joi.string().min(3).max(30),\n        free_service_number: Joi.number().integer()\n    }),\n    SalesDetails: Joi.object().keys({\n        SaleId: Joi.number().integer().required(),\n        price: Joi.number().integer().required(),\n        discount: Joi.number().integer().required(),\n        internal_reference: Joi.string().min(3).max(30),\n        payment_method: Joi.string().min(3).max(30).required(),\n        down_payment: Joi.number(),\n        due_payment: Joi.number(),\n        sales_date: Joi.date().required(),\n        credit_start_date: Joi.date(),\n        credit_end_date: Joi.date()\n    }) ,\n    EmiDetails: Joi.object().keys({\n        payable_money: Joi.number().integer(),\n        interest_rate: Joi.number().integer().required(),\n        date_of_the_payment: Joi.date().required()\n    }).optional()\n\n});\n\nexport function isSaleCreateDataValid(req, res, next) {\n    const result = Joi.validate(req.body, saleSchema);\n    if (result.error === null) {\n        next();\n    } else {\n        return res.status(400).json(result.error);\n    }\n}\n\nexport function isSaleUpdateDataValid(req, res, next) {\n    const result = Joi.validate(req.body, saleUpdateSchema);\n    if (result.error === null) {\n        next();\n    } else {\n        return res.status(400).json(result.error);\n    }\n\n}"]}