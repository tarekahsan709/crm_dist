{"version":3,"sources":["sqldb/index.js"],"names":["db","Sequelize","sequelize","uri","options","authenticate","then","err","console","log","catch","salesDetails","define","price","type","INTEGER","allowNull","sales_date","DATE","credit_start_date","credit_end_date","free_service_number","discount","down_payment","due_payment","degree_of_trust","STRING","internal_reference","payment_method","Emi","import","Sale","SalesDetails","EmiDetails","Vehicle","Role","Problem","Permission","VehicleModel","Job","Grade","Employee","Designation","Dealer","Customer","Area","Thing","User","CustomerVehicle","RolePermissions","belongsTo","belongsToMany","through","onDelete","hooks","hasMany","module","exports"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Sequelize initialization module\n */\n\n'use strict';\n\nimport path from 'path';\nimport config from '../config/environment';\nimport Sequelize from 'sequelize';\n\n//\n// var db = {\n//   Sequelize,\n//   sequelize: new Sequelize('CRM', 'root', '1234567Asd#', {\n//     host: 'localhost',\n//     dialect: 'mysql',\n//\n//     pool: {\n//       max: 5,\n//       min: 0,\n//       idle: 10000\n//     }\n//   })\n// };\n\n// for local at home\nvar db = {\n    Sequelize,\n    sequelize: new Sequelize(config.sequelize.uri, config.sequelize.options)\n};\n// for local at home\n\ndb.sequelize.authenticate()\n    .then(function (err) {\n        console.log('Connection has been established successfully.');\n    })\n    .catch(function (err) {\n        console.log('Unable to connect to the database:', err);\n    });\n// sales details design has declared here\n\n\n\nconst salesDetails = db.sequelize.define('salesDetails', {\n    price: {\n        type: db.Sequelize.INTEGER(15),\n        allowNull: false\n    },\n    sales_date: {\n        type: db.Sequelize.DATE,\n        allowNull: false\n    },\n    credit_start_date: {\n        type: db.Sequelize.DATE,\n        allowNull: true\n    },\n    credit_end_date: {\n        type: db.Sequelize.DATE,\n        allowNull: true\n    },\n    free_service_number: {\n        type: db.Sequelize.INTEGER(5),\n        allowNull: true\n    },\n    discount: {\n        type: db.Sequelize.INTEGER(12),\n        allowNull: true\n    },\n    down_payment: {\n        type: db.Sequelize.INTEGER(12),\n        allowNull: true\n    },\n    due_payment: {\n        type: db.Sequelize.INTEGER(12),\n        allowNull: true\n    },\n    degree_of_trust: {\n        type: db.Sequelize.STRING,\n        allowNull: true\n    },\n    internal_reference: {\n        type: db.Sequelize.STRING,\n        allowNull: true\n    },\n    payment_method: {\n        type: db.Sequelize.STRING,\n        allowNull: false\n    }\n});\n\n// const emiDetails = db.sequelize.define('EmiDetails', {\n//     _id: {\n//         type: db.Sequelize.INTEGER(11),\n//         allowNull: false,\n//         primaryKey: true,\n//         autoIncrement: true\n//     },\n//     is_emi_complete: {\n//         type: db.Sequelize.BOOLEAN,\n//         allowNull: true,\n//         defaultValue:false\n//\n//     },\n//     //Initially it is equivalent salesDetails due_payment\n//     payable_money: {\n//         type: db.Sequelize.STRING,\n//         allowNull: false\n//     },\n//     date_of_the_payment: {\n//         type: db.Sequelize.DATE,\n//         allowNull: false\n//     },\n//     payment_slot: {\n//         type: db.Sequelize.INTEGER(12),\n//         allowNull: true,\n//         defaultValue: 1\n//\n//     },\n//     interest_rate: {\n//         type: db.Sequelize.INTEGER(12),\n//         allowNull: false\n//     }\n// });\n\n\n// Insert models below\ndb.Emi = db.sequelize.import('../api/emi/emi.model');\ndb.Sale = db.sequelize.import('../api/sale/sale.model');\ndb.SalesDetails = salesDetails;\ndb.EmiDetails = db.sequelize.import('../api/emi/emi.model');\n// db.VehicleDetail = db.sequelize.import('../api/vehicleDetail/vehicleDetail.model');\ndb.Vehicle = db.sequelize.import('../api/vehicle/vehicle.model');\ndb.Role = db.sequelize.import('../api/role/role.model');\ndb.Problem = db.sequelize.import('../api/problem/problem.model');\ndb.Permission = db.sequelize.import('../api/permission/permission.model');\ndb.VehicleModel = db.sequelize.import('../api/vehicleModel/vehicleModel.model');\ndb.Job = db.sequelize.import('../api/job/job.model');\ndb.Grade = db.sequelize.import('../api/grade/grade.model');\ndb.Employee = db.sequelize.import('../api/employee/employee.model');\ndb.Designation = db.sequelize.import('../api/designation/designation.model');\ndb.Dealer = db.sequelize.import('../api/dealer/dealer.model');\ndb.Customer = db.sequelize.import('../api/customer/customer.model');\ndb.Area = db.sequelize.import('../api/area/area.model');\ndb.Thing = db.sequelize.import('../api/thing/thing.model');\ndb.User = db.sequelize.import('../api/user/user.model');\n\ndb.CustomerVehicle = db.sequelize.import('ExtraDatabaseModel/customerVehicles.model');\ndb.RolePermissions = db.sequelize.import('ExtraDatabaseModel/rolePermissions.model');\n// db.UserRole = db.sequelize.import('../ExtraDatabaseModel/userRoles.model'); not working\n\n\n//------------------Database relations below\n\n// db.VehicleDetail.belongsTo(db.Dealer);\ndb.Vehicle.belongsTo(db.VehicleModel);\n// db.Vehicle.hasOne(db.VehicleDetail);\ndb.Employee.belongsTo(db.Designation);\n\ndb.Job.belongsTo(db.Vehicle);\n\ndb.Job.belongsToMany(db.Employee, {through: 'jobEmployeeMappingTable'}, {onDelete: 'cascade', hooks: true});\n\ndb.Employee.belongsToMany(db.Job, {through: 'jobEmployeeMappingTable'});\n\ndb.Job.belongsToMany(db.Problem, {through: 'jobProblemMappingTable'}, {onDelete: 'cascade', hooks: true});\n\ndb.Problem.belongsToMany(db.Job, {through: 'jobProblemMappingTable'});\n\ndb.Employee.hasMany(db.Sale);\n\ndb.Sale.belongsTo(db.Employee);\n\ndb.Customer.hasMany(db.Sale);\n\ndb.Sale.belongsTo(db.Customer);\n\ndb.Area.hasMany(db.Customer);\n\ndb.Sale.belongsToMany(db.Vehicle, {through: 'salesDetails'}, {onDelete: 'cascade', hooks: true});\n\ndb.Vehicle.belongsToMany(db.Sale, {through: 'salesDetails'});\n\nsalesDetails.belongsTo(db.Sale);\n\nsalesDetails.belongsTo(db.Vehicle);\n\ndb.EmiDetails.belongsTo(db.Sale);\n\n\ndb.User.belongsToMany(db.Role, {through: 'UserRole'});\ndb.Role.belongsToMany(db.User, {through: 'UserRole'});\n\n\nmodule.exports = db;\n"]}